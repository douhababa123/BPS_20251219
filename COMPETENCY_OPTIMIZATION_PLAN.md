# ğŸ¨ èƒ½åŠ›ç”»åƒæ¨¡å—ä¼˜åŒ–æ–¹æ¡ˆ

## ğŸ“‹ éœ€æ±‚ç¡®è®¤

### âœ… å·²ç¡®è®¤çš„éœ€æ±‚

1. **9å¤§æ¨¡å—** = `skills` è¡¨çš„ `module_id: 1-9`
2. **ä¸ªäººè§†å›¾é›·è¾¾å›¾**ï¼š2ä¸ªç‹¬ç«‹é›·è¾¾å›¾ï¼Œé€šè¿‡æŒ‰é’®åˆ‡æ¢
   - é›·è¾¾å›¾Aï¼š9å¤§æ¨¡å—ç»´åº¦
   - é›·è¾¾å›¾Bï¼š39ä¸ªèƒ½åŠ›ç±»å‹ç»´åº¦
3. **å·®è·åˆ†å¸ƒæŸ±çŠ¶å›¾**ï¼š2ä¸ªç‹¬ç«‹æŸ±çŠ¶å›¾ï¼Œé€šè¿‡æŒ‰é’®åˆ‡æ¢
   - æŸ±çŠ¶å›¾Aï¼š9å¤§æ¨¡å—å·®è·
   - æŸ±çŠ¶å›¾Bï¼š39ä¸ªèƒ½åŠ›ç±»å‹å·®è·
4. **å·®è·åˆ†å¸ƒ**ï¼šå›¢é˜Ÿè§†å›¾ + ä¸ªäººè§†å›¾éƒ½è¦æ˜¾ç¤º
5. **æ’åè¡¨**ï¼šåªéœ€è¦èƒ½åŠ›æ¨¡å—æ’åï¼ˆæŒ‰gapæ€»åˆ†æ’åºï¼‰ï¼Œæ˜¾ç¤ºåœ¨å›¢é˜Ÿè§†å›¾
6. **é¡µé¢æ›¿æ¢**ï¼šå®Œå…¨æ›¿æ¢ç°æœ‰ `Competency.tsx`ï¼Œä½¿ç”¨å…¨å±å¸ƒå±€
7. **Tabç»“æ„**ï¼š
   - ç¬¬ä¸€çº§ï¼šå›¢é˜Ÿè§†å›¾ | ä¸ªäººè§†å›¾
   - ç¬¬äºŒçº§ï¼šå·®è·åˆ†æ | æ’å
8. **å¹´ä»½ç­›é€‰**ï¼šæ”¯æŒæŒ‰å¹´ä»½ç­›é€‰æ•°æ®

---

## ğŸ—ºï¸ Module ID æ˜ å°„å…³ç³»ï¼ˆéœ€ç¡®è®¤ï¼‰

æ ¹æ®ä»£ç åˆ†æï¼Œæˆ‘å‘ç°äº†ä»¥ä¸‹æ˜ å°„å…³ç³»ï¼š

### æ–¹æ¡ˆAï¼šä» `skillDefinitionParser.ts` æ¨æ–­

```typescript
const MODULE_MAPPING: Record<string, number> = {
  'BPS elements': 1,
  'Investment efficiency': 2,  // åŒ…å« PGL å’Œ IE
  'Waste-free&stable flow': 3, // åŒ…å« TPM å’Œ LBP
  "Everybody's CIP": 4,
  'Leadership commitment': 5,
  'CIP in indirect area': 6,   // LEAN
  'Digital Transformation': 7,
};
```

### æ–¹æ¡ˆBï¼šå®Œæ•´çš„9å¤§æ¨¡å—ï¼ˆæ¨èï¼‰

æ ¹æ®æ‚¨çš„Excelæ•°æ®å’Œå®é™…æŠ€èƒ½åˆ†å¸ƒï¼Œæˆ‘æ¨èï¼š

```typescript
const MODULE_MAPPING = {
  1: { id: 1, name: 'BPS elements', icon: 'ğŸ¯', color: '#1E3A8A' },
  2: { id: 2, name: 'Investment efficiency_PGL', icon: 'ğŸ“Š', color: '#2563EB' },
  3: { id: 3, name: 'Investment efficiency_IE', icon: 'ğŸ“ˆ', color: '#3B82F6' },
  4: { id: 4, name: 'Waste-free&stable flow_TPM', icon: 'âš™ï¸', color: '#0EA5E9' },
  5: { id: 5, name: 'Waste-free&stable flow_LBP', icon: 'ğŸ”„', color: '#06B6D4' },
  6: { id: 6, name: "Everybody's CIP", icon: 'ğŸ’¡', color: '#14B8A6' },
  7: { id: 7, name: 'Leadership commitment', icon: 'ğŸ‘¥', color: '#10B981' },
  8: { id: 8, name: 'CIP in indirect area_LEAN', icon: 'âš¡', color: '#84CC16' },
  9: { id: 9, name: 'Digital Transformation', icon: 'ğŸ’»', color: '#EAB308' },
};
```

**æ¨èåŸå› ï¼š**
- âœ… è¦†ç›–æ‰€æœ‰å®é™…ä½¿ç”¨çš„æ¨¡å—
- âœ… ä¸Excelæ•°æ®ä¸€è‡´
- âœ… æ¯ä¸ªæ¨¡å—ç‹¬ç«‹IDï¼Œä¾¿äºç»Ÿè®¡
- âœ… é¢„è®¾äº†å›¾æ ‡å’Œé¢œè‰²ï¼Œä¾¿äºå¯è§†åŒ–

---

## ğŸš€ API æ–¹æ³•å»ºè®®

### é€‰é¡¹1ï¼šä½¿ç”¨ç°æœ‰æ–¹æ³• + å‰ç«¯èšåˆ â­ **æ¨è**

**ä¼˜åŠ¿ï¼š**
- âœ… **é€Ÿåº¦å¿«**ï¼šä¸€æ¬¡æ€§è·å–æ‰€æœ‰æ•°æ®ï¼Œå‰ç«¯ç¼“å­˜
- âœ… **çµæ´»æ€§é«˜**ï¼šå‰ç«¯å¯ä»¥ä»»æ„åˆ‡æ¢å¹´ä»½ã€ç­›é€‰æ¡ä»¶
- âœ… **å¯é æ€§å¼º**ï¼šå‡å°‘APIè°ƒç”¨æ¬¡æ•°
- âœ… **å®ç°ç®€å•**ï¼šä½¿ç”¨ç°æœ‰API

**å®ç°æ–¹å¼ï¼š**
```typescript
// 1. è·å–åŸºç¡€æ•°æ®ï¼ˆä¸€æ¬¡æ€§åŠ è½½ï¼‰
const employees = await supabaseService.getAllEmployees();
const skills = await supabaseService.getAllSkills();
const assessments = await supabaseService.getAllAssessments(selectedYear);

// 2. å‰ç«¯èšåˆè®¡ç®—
// - å›¢é˜Ÿ9å¤§æ¨¡å—å¹³å‡åˆ†
const teamModuleStats = calculateTeamModuleStats(assessments, skills);

// - ä¸ªäºº9å¤§æ¨¡å—åˆ†æ•°
const personalModuleStats = calculatePersonalModuleStats(selectedEmployee, assessments, skills);

// - æ¨¡å—æ’å
const moduleRanking = calculateModuleRanking(assessments, skills);
```

### é€‰é¡¹2ï¼šæ–°å¢ä¸“ç”¨èšåˆAPI

**ä¼˜åŠ¿ï¼š**
- âœ… æ•°æ®åº“å±‚é¢èšåˆï¼Œæ€§èƒ½æ›´å¥½
- âœ… å‡å°‘æ•°æ®ä¼ è¾“é‡
- âœ… å¤æ‚è®¡ç®—åœ¨åç«¯å®Œæˆ

**åŠ£åŠ¿ï¼š**
- âŒ éœ€è¦é¢å¤–å¼€å‘API
- âŒ çµæ´»æ€§è¾ƒä½
- âŒ åˆ‡æ¢ç­›é€‰æ¡ä»¶éœ€è¦é‡æ–°è¯·æ±‚

**æ–°å¢APIç¤ºä¾‹ï¼š**
```typescript
// supabaseService.ts
async getTeamModuleStats(year: number): Promise<ModuleStats[]>
async getPersonalModuleStats(employeeId: string, year: number): Promise<ModuleStats[]>
async getModuleRanking(year: number): Promise<ModuleRanking[]>
```

### ğŸ¯ **æˆ‘çš„æ¨èï¼šé€‰é¡¹1**

**ç†ç”±ï¼š**
1. **æ€§èƒ½è¶³å¤Ÿ**ï¼šå‡è®¾21ä¸ªå‘˜å·¥ Ã— 104ä¸ªæŠ€èƒ½ = 2184æ¡è¯„ä¼°è®°å½•ï¼Œå‰ç«¯èšåˆè€—æ—¶ < 50ms
2. **ç”¨æˆ·ä½“éªŒå¥½**ï¼šåˆ‡æ¢å¹´ä»½ã€åˆ‡æ¢è§†å›¾æ— éœ€ç­‰å¾…
3. **ä»£ç å¯ç»´æŠ¤**ï¼šèšåˆé€»è¾‘åœ¨å‰ç«¯ï¼Œä¾¿äºè°ƒè¯•å’Œä¿®æ”¹
4. **æ•°æ®é‡å¯æ§**ï¼šå½“å‰æ•°æ®è§„æ¨¡ä¸å¤§ï¼Œå‰ç«¯å®Œå…¨å¯ä»¥å¤„ç†

**ä½•æ—¶è€ƒè™‘é€‰é¡¹2ï¼š**
- å‘˜å·¥æ•° > 100
- æŠ€èƒ½æ•° > 200
- è¯„ä¼°è®°å½• > 20,000 æ¡

---

## ğŸ“ é¡µé¢å¸ƒå±€è®¾è®¡

### æ•´ä½“ç»“æ„ï¼ˆå‚è€ƒèƒ½åŠ›è¯„ä¼°æ¨¡å—ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ èƒ½åŠ›ç”»åƒ Competency Intelligence                            â”‚
â”‚ [å¹´ä»½ç­›é€‰ 2025â–¼]  [åˆ·æ–°] [å¯¼å‡º]                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å›¢é˜Ÿè§†å›¾ Team] [ä¸ªäººè§†å›¾ Personal]                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  [å·®è·åˆ†æ Gap Analysis] [æ’å Ranking]            â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  [å†…å®¹åŒºåŸŸ - æ ¹æ®é€‰æ‹©çš„tabæ˜¾ç¤ºä¸åŒå†…å®¹]            â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å›¢é˜Ÿè§†å›¾ - å·®è·åˆ†æ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç»Ÿè®¡å¡ç‰‡åŒº                                                  â”‚
â”‚  [å‘˜å·¥æ€»æ•°: 21] [æŠ€èƒ½æ€»æ•°: 104] [å¹³å‡Gap: 2.3] [éœ€æå‡: 45] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  å›¢é˜Ÿ9å¤§æ¨¡å—é›·è¾¾å›¾        â”‚  â”‚  å·®è·åˆ†å¸ƒæŸ±çŠ¶å›¾          â”‚ â”‚
â”‚  â”‚  (ç°çŠ¶ vs ç›®æ ‡)          â”‚  â”‚  [æ¨¡å—çº§â–¼] [æŠ€èƒ½çº§]     â”‚ â”‚
â”‚  â”‚                          â”‚  â”‚                          â”‚ â”‚
â”‚  â”‚      (é›·è¾¾å›¾)            â”‚  â”‚      (æŸ±çŠ¶å›¾)            â”‚ â”‚
â”‚  â”‚                          â”‚  â”‚                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å›¢é˜Ÿè§†å›¾ - æ’å

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨¡å—æ’å Module Ranking                                     â”‚
â”‚  æŒ‰å·®è·æ€»åˆ†æ’åº                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  æ’å  æ¨¡å—åç§°              æ€»Gap  å¹³å‡Gap  äººæ•°   â”‚    â”‚
â”‚  â”‚  ğŸ¥‡   Digital Transform...    45.2    2.8     16    â”‚    â”‚
â”‚  â”‚  ğŸ¥ˆ   Leadership commit...    38.5    2.5     15    â”‚    â”‚
â”‚  â”‚  ğŸ¥‰   Everybody's CIP         32.1    2.1     15    â”‚    â”‚
â”‚  â”‚  4    Waste-free&stable...    28.7    1.9     15    â”‚    â”‚
â”‚  â”‚  ...                                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸ªäººè§†å›¾ - å·®è·åˆ†æ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [å·¥ç¨‹å¸ˆé€‰æ‹©ä¸‹æ‹‰æ¡†: å¼ ä¸‰ â–¼]                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ä¸ªäººèƒ½åŠ›é›·è¾¾å›¾           â”‚  â”‚  ä¸ªäººå·®è·åˆ†å¸ƒæŸ±çŠ¶å›¾      â”‚ â”‚
â”‚  â”‚  [9å¤§æ¨¡å—â–¼] [39æŠ€èƒ½]     â”‚  â”‚  [æ¨¡å—çº§â–¼] [æŠ€èƒ½çº§]     â”‚ â”‚
â”‚  â”‚                          â”‚  â”‚                          â”‚ â”‚
â”‚  â”‚      (é›·è¾¾å›¾)            â”‚  â”‚      (æŸ±çŠ¶å›¾)            â”‚ â”‚
â”‚  â”‚                          â”‚  â”‚                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  ä¸ªäººæå‡å»ºè®® Recommendations                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  1. Digital Transformation - Power BI (Gap: 3)     â”‚    â”‚
â”‚  â”‚  2. Leadership commitment - BMT (Gap: 3)           â”‚    â”‚
â”‚  â”‚  ...                                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°è¦ç‚¹

### 1. æ•°æ®èšåˆå‡½æ•°

```typescript
// è®¡ç®—å›¢é˜Ÿæ¨¡å—ç»Ÿè®¡
function calculateTeamModuleStats(
  assessments: AssessmentFull[],
  skills: Skill[]
): ModuleStats[] {
  const moduleMap = new Map<number, {
    totalCurrent: number;
    totalTarget: number;
    totalGap: number;
    count: number;
  }>();
  
  assessments.forEach(assessment => {
    const skill = skills.find(s => s.id === assessment.skill_id);
    if (!skill) return;
    
    const existing = moduleMap.get(skill.module_id) || {
      totalCurrent: 0,
      totalTarget: 0,
      totalGap: 0,
      count: 0
    };
    
    existing.totalCurrent += assessment.current_level;
    existing.totalTarget += assessment.target_level;
    existing.totalGap += assessment.gap;
    existing.count += 1;
    
    moduleMap.set(skill.module_id, existing);
  });
  
  return Array.from(moduleMap.entries()).map(([moduleId, stats]) => ({
    moduleId,
    moduleName: MODULE_MAPPING[moduleId].name,
    avgCurrent: stats.totalCurrent / stats.count,
    avgTarget: stats.totalTarget / stats.count,
    totalGap: stats.totalGap,
    avgGap: stats.totalGap / stats.count,
  }));
}
```

### 2. ç»„ä»¶ç»“æ„

```
Competency.tsx (ä¸»é¡µé¢)
â”œâ”€â”€ CompetencyHeader (é¡¶éƒ¨ç­›é€‰æ )
â”œâ”€â”€ TabNavigation (ä¸€çº§Tab: å›¢é˜Ÿ/ä¸ªäºº)
â””â”€â”€ ViewContainer
    â”œâ”€â”€ TeamView (å›¢é˜Ÿè§†å›¾)
    â”‚   â”œâ”€â”€ SubTabNavigation (äºŒçº§Tab: å·®è·åˆ†æ/æ’å)
    â”‚   â”œâ”€â”€ GapAnalysisView
    â”‚   â”‚   â”œâ”€â”€ StatisticsCards
    â”‚   â”‚   â”œâ”€â”€ TeamRadarChart (9å¤§æ¨¡å—é›·è¾¾å›¾)
    â”‚   â”‚   â””â”€â”€ GapBarChart (å¯åˆ‡æ¢çš„æŸ±çŠ¶å›¾)
    â”‚   â””â”€â”€ RankingView
    â”‚       â””â”€â”€ ModuleRankingTable
    â””â”€â”€ PersonalView (ä¸ªäººè§†å›¾)
        â”œâ”€â”€ EmployeeSelector
        â”œâ”€â”€ SubTabNavigation (äºŒçº§Tab: å·®è·åˆ†æ/æ’å)
        â””â”€â”€ GapAnalysisView
            â”œâ”€â”€ PersonalRadarChart (å¯åˆ‡æ¢: 9æ¨¡å—/39æŠ€èƒ½)
            â”œâ”€â”€ PersonalGapBarChart (å¯åˆ‡æ¢: æ¨¡å—/æŠ€èƒ½)
            â””â”€â”€ RecommendationsList
```

### 3. æ€§èƒ½ä¼˜åŒ–

```typescript
// ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ
const teamModuleStats = useMemo(() => 
  calculateTeamModuleStats(assessments, skills),
  [assessments, skills]
);

// ä½¿ç”¨ React Query ç¼“å­˜APIæ•°æ®
const { data: assessments } = useQuery({
  queryKey: ['assessments', selectedYear],
  queryFn: () => supabaseService.getAllAssessments(selectedYear),
  staleTime: 5 * 60 * 1000, // 5åˆ†é’Ÿç¼“å­˜
});
```

---

## ğŸ“Š æ•°æ®ç»“æ„å®šä¹‰

```typescript
// æ¨¡å—ç»Ÿè®¡
interface ModuleStats {
  moduleId: number;
  moduleName: string;
  avgCurrent: number;
  avgTarget: number;
  totalGap: number;
  avgGap: number;
  employeeCount?: number;
}

// æ¨¡å—æ’å
interface ModuleRanking extends ModuleStats {
  rank: number;
  icon: string;
  color: string;
}

// ä¸ªäººæ¨¡å—ç»Ÿè®¡
interface PersonalModuleStats {
  employeeId: string;
  employeeName: string;
  modules: ModuleStats[];
}

// æŠ€èƒ½ç»Ÿè®¡
interface SkillStats {
  skillId: number;
  skillName: string;
  moduleName: string;
  totalGap: number;
  avgGap: number;
  employeeCount: number;
}
```

---

## âœ… å®æ–½æ­¥éª¤

1. **ç¡®è®¤æ¨¡å—æ˜ å°„**ï¼ˆéœ€è¦æ‚¨ç¡®è®¤æ–¹æ¡ˆAè¿˜æ˜¯æ–¹æ¡ˆBï¼‰
2. **åˆ›å»ºæ•°æ®èšåˆå·¥å…·å‡½æ•°**
3. **é‡æ„ Competency.tsx é¡µé¢**
4. **å®ç°å›¾è¡¨ç»„ä»¶**ï¼ˆé›·è¾¾å›¾ã€æŸ±çŠ¶å›¾ï¼‰
5. **å®ç°æ’åè¡¨ç»„ä»¶**
6. **æµ‹è¯•å’Œä¼˜åŒ–**

---

## â“ éœ€è¦æ‚¨ç¡®è®¤

1. âœ… **æ¨¡å—æ˜ å°„å…³ç³»**ï¼šæ–¹æ¡ˆAï¼ˆ7ä¸ªæ¨¡å—ï¼‰è¿˜æ˜¯æ–¹æ¡ˆBï¼ˆ9ä¸ªæ¨¡å—ï¼‰ï¼Ÿ
2. âœ… **APIæ–¹æ¡ˆ**ï¼šç¡®è®¤ä½¿ç”¨é€‰é¡¹1ï¼ˆå‰ç«¯èšåˆï¼‰ï¼Ÿ
3. âœ… **é¡µé¢å¸ƒå±€**ï¼šä¸Šè¿°å¸ƒå±€æ˜¯å¦ç¬¦åˆé¢„æœŸï¼Ÿ

**ç¡®è®¤åæˆ‘ç«‹å³å¼€å§‹ç¼–ç å®ç°ï¼** ğŸš€
